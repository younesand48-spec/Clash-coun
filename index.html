<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Overlay Clash Royale</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    text-align: center;
    background: transparent;
    color: white;
  }
  #stats { font-size: 32px; font-weight: bold; margin-bottom:10px; text-shadow:1px 1px 3px black; }
  #bar-container { width:400px; height:30px; background:rgba(255,255,255,0.2); border-radius:15px; margin:0 auto; overflow:hidden; }
  #bar-fill { height:100%; width:0; border-radius:15px; transition: width 1s, background 1s; }
  #emoji { font-size:40px; margin-top:8px; }
</style>
</head>
<body>

<div id="stats">Chargement...</div>
<div id="bar-container">
  <div id="bar-fill"></div>
</div>
<div id="emoji">ğŸ˜</div>

<script>
const statsDiv = document.getElementById("stats");
const barFill = document.getElementById("bar-fill");
const emoji = document.getElementById("emoji");
let lastTrophies = 0;

function getColor(trophies) {
  if (trophies >= 10000) return "linear-gradient(to right, violet, magenta)";
  if (trophies >= 8000) return "linear-gradient(to right, orange, gold)";
  if (trophies >= 5000) return "linear-gradient(to right, cyan, blue)";
  return "linear-gradient(to right, green, lime)";
}

async function loadStats() {
  try {
    const res = await fetch("https://raw.githubusercontent.com/younesand48-spec/Clash-coun/main/stats.txt");
    const text = await res.text();
    const lines = text.split("\n");
    const trophies = parseInt(lines[0].split(":")[1]);
    const wins = parseInt(lines[1].split(":")[1]);
    const losses = parseInt(lines[2].split(":")[1]);
    const ratio = (wins / (wins + losses) * 100).toFixed(1);

    statsDiv.textContent = `ğŸ† ${trophies} | Ratio : ${ratio}%`;

    const percent = Math.min(trophies / 12000 * 100, 100);
    barFill.style.width = percent + "%";
    barFill.style.background = getColor(trophies);

    if (trophies > lastTrophies) emoji.textContent = "ğŸ˜ƒ";
    else if (trophies < lastTrophies) emoji.textContent = "ğŸ˜¢";
    else emoji.textContent = "ğŸ˜";

    lastTrophies = trophies;
  } catch(err) {
    statsDiv.textContent = "Erreur lecture stats";
    console.error(err);
  }
}

loadStats();
setInterval(loadStats, 15000); // mise Ã  jour toutes les 15 sec
</script>

</body>
</html>
